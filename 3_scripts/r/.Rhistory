scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill='grey80')
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center), colour='blue') +
scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill='grey80')
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
# colour world map
micolor <- '#c6dbef'
# Get a world map
wm <- map_data('world')
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
micolor <- '#74a9cf'
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
micolor <- '#bcbddc'
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+ scale_size_manual(values=c(3,4,5)) +
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
micolor <- 'gray80'
color.nceas <- '#005824'
color.renci <- '#8c2d04'
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+
scale_size_manual(values=c(3,4,5))+
scale_colour_manual(values =c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
micolor <- 'gray80'
color.nceas <- '#41ab5d'
color.renci <- '#d7301f'
# Get a world map
wm <- map_data('world')
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+
scale_size_manual(values=c(3,4,5))+
scale_colour_manual(values =c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
# Get a world map
wm <- map_data('world')
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(values =c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
wm <- map_data('world')
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(), panel.grid.minor.y = element_blank())
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(2, "cm"))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(10, "cm"))
p1
# load library
library('ggmap')
library('ggplot2')
library('grid')
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(10, "cm"))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(2, "cm"))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.5, "cm"))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.5, "cm"))+
guides(colour = guide_legend(override.aes = list(size=10)))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.5, "cm"))+
guides(colour = guide_legend(override.aes = list(size=5)))
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.5, "cm"),
legend.key=element_blank())+
guides(colour = guide_legend(override.aes = list(size=5))) # To increase the size of points in legend
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.2, "cm"),
legend.key=element_blank())+
guides(colour = guide_legend(override.aes = list(size=3))) # To increase the size of points in legend
p1
p <- ggplot() + geom_polygon(data=wm, aes(x=long, y=lat, group=group), fill=micolor)
p1 <- p + geom_point(data=mycities,aes(x=long, y=lat, size=factor(count), shape=center, color=center)) +
scale_shape_manual(name='Center', values=c(15,16))+
scale_size_manual(values=c(3,4,5), guide=FALSE)+
scale_colour_manual(name='Center', values=c(color.nceas,color.renci))+
theme_bw() + theme(panel.grid.major=element_blank(),
panel.grid.minor.y = element_blank(),
legend.key.size = unit(1.2, "cm"),
legend.key=element_blank())+
guides(colour = guide_legend(override.aes = list(size=5))) # To increase the size of points in legend
p1
4550/91
library(rgif)
library(rgbif)
citation('rgbif')
library(taxize)
taxize
library(taxize)
install.packages(taxize)
install.packages("taxize")
library("taxize")
citation("taxize")
urlfile <- url('http://www.iecolab.es/datasets/quality_andalusia.csv')
mydata <- read.csv(urlfile, header=T, sep=',')
cor(mydata)
str(mydata)
cor(mydata[,c(12:13)])
plot(mydata$unemployed~mydata$employed)
plot(mydata$unemployed,mydata$employed)
abline(lm(mydata$unemployed,mydata$employed))
abline(lm(mydata$unemployed~mydata$employed))
max(mydata$employed)
# Prepare data
# // 1  Change the effects of some variables
mydata$migration <- mydata$migration * (-1)
mydata$unemployed <- mydata$unemployed * (-1)
mydata$age_index <- mydata$age_index * (-1)
entities <- mydata[,3]
row.names(mydata) <- entities
# // 3  Select only the variables that we want to use to compute dp2
myindicators <- mydata[,c(4:25)]
# -----------------------------------------------------------
# -----------------------------------------------------------
# Compute the reference base vector. We use the makeReferenceVector (see p2distnace documentation)
minRV <- makeReferenceVector(X=myindicators, reference_vector_function = min)
library(p2distance)
minRV <- makeReferenceVector(X=myindicators, reference_vector_function = min)
library(p2distance)
minRV <- makeReferenceVector(X=myindicators, reference_vector_function = min)
ind <- p2distance(matriz=as.matrix(myindicators), reference_vector = minRV, iterations = 50)
head(ind$p2distance)
head(ind$p2distance)
res <- ind$p2distance
res$cod <- row.names(res)
res <- as.data.frame(ind$p2distance)
res$cod <- row.names(res)
View(res)
res$muni <- substr(res$cod, 1,4)
View(res)
res <- data.frame(p2d=ind$p2distance,
year=substr(row.names(ind$p2distance),1,4),
muni=substr(row.names(ind$p2distance),4,9))
View(res)
res <- data.frame(p2d=ind$p2distance,
year=substr(row.names(ind$p2distance),1,4),
muni=substr(row.names(ind$p2distance),5,9))
View(res)
res <- data.frame(p2d=ind$p2distance,
year=substr(row.names(ind$p2distance),1,4),
muni=substr(row.names(ind$p2distance),5,9))
getwd()
setwd("/Users/ajpelu/")
write.csv(res, file="out_p2distance.csv", row.names=TRUE)
urlfile <- url('http://www.iecolab.es/datasets/quality_andalusia.csv')
mydata <- read.csv(urlfile, header=T, sep=',')
1498/2
urlfile <- url('http://www.iecolab.es/datasets/quality_andalusia.csv')
mydata <- read.csv(urlfile, header=T, sep=',')
cor(mydata[,c(12:13)])
str(mydata)
my89 <- mydata[mydata$year==1989,]
my09 <- mydata[mydata$year==2009,]
cor(my89[,c(12:13)])
cor(my09[,c(12:13)])
cor(mydata[,c(12:13)])
par(mfrow=c(1,2))plot(my89$unemployed,my89$employed)abline(lm(my89$unemployed~my89$employed))plot(my09$unemployed,my09$employed)abline(lm(my09$unemployed~my09$employed))
par(mfrow=c(1,2))
plot(my89$unemployed,my89$employed)abline(lm(my89$unemployed~my89$employed))plot(my09$unemployed,my09$employed)abline(lm(my09$unemployed~my09$employed))
plot(my89$unemployed,my89$employed)
abline(lm(my89$unemployed~my89$employed))
plot(my09$unemployed,my09$employed)
abline(lm(my09$unemployed~my09$employed))
library(ggplot2)
p <- qplot(employed, unemployed, data=my89)
p + geom_line()
p + geom_abline()
coef(lm(employed ~ unemployed, data = my89))
p + geom_abline(intercept=30.78, slope=-0.032)
lm(employed ~ unemployed, data = my89)
summary(lm(employed ~ unemployed, data = my89))
par(mfrow=c(1,2))plot(my89$unemployed,my89$employed)abline(lm(my89$unemployed~my89$employed))plot(my09$unemployed,my09$employed)abline(lm(my09$unemployed~my09$employed))
par(mfrow=c(1,2))
plot(my89$unemployed,my89$employed)
abline(lm(my89$unemployed~my89$employed))
plot(my09$unemployed,my09$employed)
abline(lm(my09$unemployed~my09$employed))
p + stat_smooth(method='lm')
urlfile <- url('http://www.iecolab.es/datasets/quality_andalusia.csv')
library('p2distance') # To compute P2 Distance
head(mydata)
names(mydata) # view variables names
# If we want to examine the values of the variable schools, we type
head(mydata["schools"])
mydata <- read.csv(urlfile, header=T, sep=',')
head(mydata)
names(mydata) # view variables names
head(mydata["schools"])
mydata$migration <- mydata$migration * (-1)
mydata$unemployed <- mydata$unemployed * (-1)
mydata$age_index <- mydata$age_index * (-1)
entities <- mydata[,3]
row.names(mydata) <- entities
myindicators <- mydata[,c(4:25)]
minRV <- makeReferenceVector(X=myindicators, reference_vector_function = min)
ind <- p2distance(matriz=as.matrix(myindicators), reference_vector = minRV, iterations = 50)
getwd()
head(ind$p2distance)
write.csv(ind$p2distance, file="out_p2distance.csv", row.names=TRUE)
df <- data.frame(entity=as.numeric(rownames(ind$p2distance)), p2d= ind$p2distance)
df <- join(df, mydata[,c('cod','year','entity')], by='entity')
library('plyr')
df <- data.frame(entity=as.numeric(rownames(ind$p2distance)), p2d= ind$p2distance)
df <- join(df, mydata[,c('cod','year','entity')], by='entity')
df$Codigo <- sprintf("%05d",df$cod)
names(df)[2] <- 'dp2'
df <- df[,c('Codigo','year','dp2')]
View(df)
dp2.89 <- df[df$year==1989,]
names(dp2.89)[3] <- 'dp2_89'
dp2.09 <- df[df$year==2009,]
names(dp2.09)[3] <- 'dp2_09'
# Create dataframe with difference
dif <- join(dp2.89, dp2.09, by='Codigo')
dif$dif <- dif$dp2_09 - dif$dp2_89
summarySE(df, measurevar='dp2', groupvars = 'year')
library('devtools')
source_url('https://raw.githubusercontent.com/ajpelu/ajpeluR/master/R/summarySE.R') # Summary function
summarySE(df, measurevar='dp2', groupvars = 'year')
str(dp2.89)
min(dp2.89$dp2_89)
max(dp2.89$dp2_89) - min(dp2.89$dp2_89)
max(dp2.09$dp2_09) - min(dp2.09$dp2_09)
co.var <- function(x) ( 100*sd(x)/mean(x) )
co.var(dp2.09$dp2_09)
co.var(dp2.89$dp2_89)
(co.var(dp2.09$dp2_09))/100
View(dif)
max(dif$dif)
order(dif[,6], decreasing = T)
ddd <- dif[order(-dif) , ]
ddd <- dif[order(dif) , ]
View(ddd)
attach(dif)
ddd <- dif[order(dif),]
View(ddd)
ddd <- dif[order(dif$dif),]
View(ddd)
ddd <- dif[order(-dif$dif),]
View(ddd)
ddd <- dif[order(dif$dif),]
View(ddd)
getwd()
di <- '/Users/ajpelu/Dropbox/MS/MS_DP_Borreguiles/git/BorreguilesDP/'
mi <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt'), sep=''), header=TRUE, sep='\t')
mi <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
head(mi)
mydata <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
remove(mi)
mydata <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
str(mydata)
names(mydata)
mydata$date <- as.Date(mydata$FECHA)
mydata$year <- as.numeric(format(date, "%Y"))
install.packages("lubridate")
library('lubridate')
mydata <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
mydata$date <- as.Date(mydata$FECHA)
mydata$year <- year(mydata$date)
head(mydata)
mydata <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
mydata$year <- year(mydata$FECHA)
mydata <- read.table(file=paste(di, '/2_diccionarios/gbif2014_c2.txt', sep=''), header=TRUE, sep='\t')
mydata$year <- year(mydata$FECHA)
head(mydata)
mydata$date <- as.Date(mydata$FECHA, "%d.%m.%Y")
mydata$year <- year(mydata$date)
head(mydata)
?as.date
?as.Date
mydata$date <- as.Date(mydata$FECHA, "%d/%m/%Y")
mydata$year <- year(mydata$date)
head(mydata)
?aggregate
x <- aggregate(mydata$TAXON, by=list(mydata$year),FUN='length')
View(x)
x <- aggregate(mydata$TAXON, by=list(mydata$TAXON, mydata$year),FUN='length')
View(x)
aux <- aggregate(mydata$TAXON, by=list(mydata$TAXON, mydata$year),FUN='length')
View(aux)
names(aux) <- c('TAXON', 'year', 'count')
library('reshape2')
aux2 <- dcast(aux, TAXON ~ year , value_var = 'count' )
aux2 <- dcast(aux, TAXON ~ year , value.var = 'count' )
View(aux2)
write.table(aux2, file=paste(di, '/2_diccionarios/taxones_year.txt', sep=''), header=TRUE, row.names=FALSE)
write.table(aux2, file=paste(di, '/2_diccionarios/taxones_year.txt', sep=''), row.names=FALSE)
write.csv(aux2, file=paste(di, '/2_diccionarios/taxones_year.csv', sep=''), row.names=FALSE)
di <- '/Users/ajpelu/Dropbox/MS/MS_DP_Borreguiles/git/BorreguilesDP'
taxones <- read.table(file=paste(di,'2_Diccionarios/TAXONES_GBIF2014.txt', sep=''),head=TRUE,sep=';')
taxones <- read.table(file=paste(di,'/2_Diccionarios/TAXONES_GBIF2014.txt', sep=''),head=TRUE,sep=';')
taxones <- read.table(file=paste(di,'/2_Diccionarios/TAXONES_GBIF2014.txt', sep=''),head=TRUE,sep='\t')
taxones <- read.table(file=paste(di,'/2_Diccionarios/TAXONES_GBIF2014.txt', sep=''),head=TRUE,sep=',')
taxones <- read.table(file=paste(di,'/2_Diccionarios/TAXONES_GBIF2014.txt', sep=''),head=TRUE,sep='\t')
View(taxones)
urfile1 <- url('https://ide.ugr.es/owncloud/public.php?service=files&t=b6fef0b03c01b8eaa78e657c48422f8d&download')
mydata <- read.csv(urlfile, header=T, sep=';')
mydata <- read.csv(urlfile1, header=T, sep=';')
urlfile1 <- url('https://ide.ugr.es/owncloud/public.php?service=files&t=b6fef0b03c01b8eaa78e657c48422f8d&download')
mydata <- read.csv(urlfile1, header=T, sep=';')
urlfile <- url('http://www.iecolab.es/datasets/quality_andalusia.csv')
mydata <- read.csv(urlfile, header=T, sep=',')
View(mydata)
di <- '/Users/ajpelu/Dropbox/MS/MS_DP_Borreguiles/git/BorreguilesDP'
phylum  <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_phylum.txt', sep=''), header=TRUE, sep='\t')
View(phylum)
phylum  <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_phylum.txt', sep=''), header=TRUE, sep=';')
prop.table(phylum, 1)
prop.table(table(phylum), 1)
prop.table(table(phylum$CuentaDeDateLastModified), 1)
names(phylum)
names(phylum) <- c("Phylum","n")
names(phylum)
sum(phylum$n)
phylum$tot <- sum(phylum$n)
View(phylum)
phylum$per <- (phylum$n / phylum$tot)*100
View(phylum)
phylum$per <- round((phylum$n / phylum$tot)*100, 2)
View(phylum)
phylum
class <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_class.txt', sep=''), header=TRUE, sep=';')
View(class)
names(class)
names(class) <- c("Class","n")
class$tot <- sum(class$n)
View(class)
class$tot <- sum(class$n)
# conpute percentage
class$per <- round((class$n / class$tot)*100, 2)
class
ord <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_order.txt', sep=''), header=TRUE, sep=';')
View(ord)
names(ord)
names(ord) <- c("Order","n")
names(ord) <- c("Order","n")
# compute total
ord$tot <- sum(ord$n)
# conpute percentage
ord$per <- round((ord$n / ord$tot)*100, 2)
ord
ord1 <- ord[order(ord$per),]
ord1
ord1 <- ord[order(-ord$per),]
ord1
ord1
fam <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_family.txt', sep=''), header=TRUE, sep=';')
View(fam)
names(fam)
names(fam) <- c("Family","n","Order","Class")
head(fam)
fam$tot <- sum(fam$n)
fam$per <- round((fam$n / fam$tot)*100, 2)
fam1 <- fam[order(-fam$per),]
fam1
fam1[fam1$Class == 'Magnoliopsida',]
fam1[fam1$Class == 'Liliopsida',]
gen <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_genus.txt', sep=''), header=TRUE, sep=';')
tax <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_taxon.txt', sep=''), header=TRUE, sep=';')
names(gen)
names(gen) <- c("Genus","n","Class","Order","Family")
# compute total
gen$tot <- sum(gen$n)
# conpute percentage
gen$per <- round((gen$n / gen$tot)*100, 2)
View(gen)
View(gen)
View(gen)
gen1 <- gen[order(-gen$per),]
View(gen1)
names(tax)
names(tax) <- c("taxa","n","Family")
View(tax)
# Taxa
```{r taxa}
#--------------------------------------------------------------------
# rename
names(tax) <- c("taxa","n","Family")
# compute total
tax$tot <- sum(tax$n)
# conpute percentage
tax$per <- round((tax$n / tax$tot)*100, 2)
# Sort by percentage
tax1 <- gen[order(-tax$per),]
tax1
#--------------------------------------------------------------------
```
names(tax) <- c("taxa","n","Family")
tax$tot <- sum(tax$n)
tax$per <- round((tax$n / tax$tot)*100, 2)
tax1 <- gen[order(-tax$per),]
tax1
names(tax) <- c("taxa","n","Family")
View(tax)
tax$tot <- sum(tax$n)
View(tax)
head(tax)
tax <- read.table(file=paste(di, '/2_diccionarios/cov_taxonomica/covtax_taxon.txt', sep=''), header=TRUE, sep=';')
names(tax) <- c("taxa","n","Family")
tax$tot <- sum(tax$n)
# conpute percentage
tax$per <- round((tax$n / tax$tot)*100, 2)
View(tax)
tax1 <- gen[order(-tax$per),]
tax1
View(tax1)
tax1 <- tax[order(-tax$per),]
View(tax1)
library('knitr')
library('rmarkdown')
setwd('/Users/ajpelu/Dropbox/MS/MS_DP_Borreguiles/git/BorreguilesDP/3_scripts/r/')
rmarkdown::render('gbif_borreguiles_005_cov_taxonomica.Rmd', 'all')
